<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>K次元 B/S买卖点指标回测｜沪深300十年年化294%｜低回撤</title>
    <meta name="description" content="通达信买/卖点指标系统：在严苛回测设置下，沪深300近10年中位数年化约95%，极端年化约294%，回撤低。文内含设置要点与实盘运用方法。">
    <meta name="keywords" content="通达信,买卖点指标,回测,沪深300,技术指标,年化收益,最大回撤,K线训练,量化测评,K次元">
    <script src="https://cdn.tailwindcss.com"></script>
    <script defer src="https://eu.umami.is/script.js" data-website-id="c8d53469-db8d-450e-9061-56cfc3abe0dd"></script>
    <style>
        :root {
            --color-background-dark: #0A0A14;
            --color-panel-background-flat: #0C0B19;
            --color-border: #232040;
            --color-primary-action: #CC2029;
            --color-primary-action-light: #D12952;
            --color-accent-gold: #B69C58;
            --color-accent-cyan-light: #4A7D9A;
            --color-text-primary: #E0E0F0;
            --color-text-secondary: #8A889F;
            --background-pattern: radial-gradient(rgba(70, 60, 130, 0.03) 1px, transparent 1px);
            --background-pattern-size: 30px 30px;
        }
        html { scroll-behavior: smooth; height: 100%; }
        body {
            background-color: var(--color-background-dark);
            background-image: var(--background-pattern);
            background-size: var(--background-pattern-size);
            color: var(--color-text-primary);
            font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            line-height: 1.5;
            margin: 0; padding: 0; height: 100%;
        }
        .container { max-width: 1200px; margin: 0 auto; padding: 0 20px; }
        .panel {
            background: linear-gradient(170deg, #13121F 0%, #0C0B19 100%);
            border: 4px solid var(--color-primary-action);
            border-radius: 26px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.4);
            overflow: hidden;
            margin: 2rem 0;
            padding: 3rem 2rem;
        }
        .logo { position: absolute; top: 20px; left: 20px; z-index: 100; display: flex; align-items: center; }
        .logo img { height: 40px; width: auto; filter: drop-shadow(0 0 5px rgba(204, 32, 41, 0.3)); transition: all 0.3s ease; }
        .logo img:hover { filter: drop-shadow(0 0 8px rgba(204, 32, 41, 0.5)); transform: scale(1.05); }
        @media (max-width: 768px) {
            .panel { border-width: 3px; border-radius: 18px; padding: 2rem 1rem; }
            .logo { top: 15px; left: 15px; }
            .logo img { height: 30px; }
        }
    </style>
    <style>
        /* 文案块：使用 whitespace-pre，保留用户换行与缩进 */
        .article-text-block {
            background: rgba(29, 27, 44, 0.5);
            border-left: 3px solid var(--color-primary-action);
            border-radius: 8px;
            color: var(--color-text-primary);
            white-space: pre-wrap; /* 保留换行与空格并自动换行 */
            overflow-wrap: anywhere; /* 超长词在任意位置断行 */
            word-break: break-word; /* 兼容性兜底 */
        }
        /* 正文图片：鼠标指示可放大 */
        #article-content img { cursor: zoom-in; }
        /* 收窄正文最大宽度以提升阅读性 */
        #article-content { max-width: 44rem; }
        
        /* 等号高亮替换用的样式 */
        .hl {
            background: #B69C58; /* 单色提亮：与设计风格一致的金色 */
            color: #0C0B19; /* 深色文字，确保高对比度可读性 */
            padding: 0 0.24em;
            border-radius: 3px;
            font-weight: 500;
        }
        .hl2 {
            color: #c50844;
        }
        .hl3 {
            color: #0d00c3;
        }
        .hl4 {
            font-size: 0.8em;
        }
        /* 强制覆盖 Tailwind 的 whitespace-pre，保持换行且断长词 */
        .article-text-block.whitespace-pre {
            white-space: pre-wrap !important;
        }
        /* 进一步兼容旧浏览器的断行 */
        .article-text-block {
            overflow-wrap: break-word;
            word-wrap: break-word;
            /* 阅读性增强 */
            line-height: 1.9;
            font-size: 1.05rem;
            letter-spacing: 0.2px;
            text-align: justify;
            text-justify: inter-ideograph;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            text-rendering: optimizeLegibility;
            background: rgba(29, 27, 44, 0.6);
        }
        @media (min-width: 1024px) {
            .article-text-block { font-size: 1.08rem; }
        }
        /* Markdown 转换样式：分割线与无序列表 */
        .article-hr {
            border: none;
            border-top: 1px solid var(--color-border);
            margin: 0.75rem 0;
        }
        .article-ul { list-style: none; margin: 0.5rem 0 0 0; padding: 0; }
        .article-ul li { position: relative; padding-left: 1.2em; margin: 0.25rem 0; }
        .article-ul li::before { content: '•'; position: absolute; left: 0; top: 0; color: var(--color-accent-gold); }
        /* 轻量弱化注释文字：字号略小、透明度略低 */
        .article-note-dim { font-size: 0.8em; opacity: 0.75; }
        .article-note-dim2 { font-size: 0.8em; color: var(--color-accent-gold); }
    </style>
    <link rel="icon" href="./logo.svg">
    <link rel="canonical" href="https://kciyuan.cn/bs_a1.html">
    <meta property="og:title" content="K次元 B/S买卖点指标回测｜沪深300十年年化294%｜低回撤">
    <meta property="og:description" content="通达信买/卖点指标系统：在严苛回测设置下，沪深300近10年中位数年化约95%，极端年化约294%，回撤低。文内含设置要点与实盘运用方法。">
    <meta property="og:image" content="./assets/s01.png">
    <meta property="og:url" content="https://kciyuan.cn/bs_a1.html">
    <meta property="og:type" content="article">
    <meta property="og:site_name" content="K次元">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="K次元 B/S买卖点指标回测｜沪深300十年年化294%｜低回撤">
    <meta name="twitter:description" content="通达信买/卖点指标系统：在严苛回测设置下，沪深300近10年中位数年化约95%，极端年化约294%，回撤低。文内含设置要点与实盘运用方法。">
    <meta name="twitter:image" content="https://kciyuan.cn/assets/s01.png">
    <meta name="author" content="K次元">
    <meta name="theme-color" content="#0A0A14">
    <meta name="color-scheme" content="dark">
    <meta name="robots" content="index, follow">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="format-detection" content="telephone=no">
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "BlogPosting",
      "headline": "K次元 B/S买卖点指标回测｜沪深300十年年化294%｜低回撤",
      "description": "通达信买/卖点指标系统：在严苛回测设置下，沪深300近10年中位数年化约95%，极端年化约294%，回撤低。文内含设置要点与实盘运用方法。",
      "image": "https://kciyuan.cn/assets/s01.png",
      "url": "https://kciyuan.cn/bs_a1.html",
      "inLanguage": "zh-CN",
      "author": { "@type": "Organization", "name": "K次元" },
      "publisher": {
        "@type": "Organization",
        "name": "K次元",
        "logo": { "@type": "ImageObject", "url": "https://kciyuan.cn/logo.svg" }
      },
      "mainEntityOfPage": { "@type": "WebPage", "@id": "https://kciyuan.cn/bs_a1.html" }
    }
    </script>
    <meta name="apple-mobile-web-app-title" content="K次元">
    <meta name="application-name" content="K次元">
    <meta name="msapplication-TileColor" content="#0A0A14">
    <meta name="msapplication-config" content="none">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <meta name="HandheldFriendly" content="true">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <style>
        /* 轻量防复制（可被覆盖，但提高成本） */
        html, body, main {
            -webkit-user-select: none;
            -moz-user-select: none;
            user-select: none;
            -webkit-touch-callout: none;
        }
    </style>
</head>
<body>
    <main class="pb-20">
        <a href="./index.html" class="logo" aria-label="返回首页">
            <img src="./logo.svg" alt="K次元 Logo">
        </a>

        <section class="section pt-24 md:pt-28">
            <div class="container">
                <div class="panel">
                    <h2 class="text-2xl font-bold mb-2">💰💰💰 本站强力出品</h2>
                    <p class="text-sm text-[color:var(--color-text-secondary)] mb-1">通达信买/卖点指标，量化测评10年>无惧牛熊>超短线爆赚>年化收益近300%！首批用户招募中，后期仅在封闭群中分发！</p>
                    <p class="text-sm text-[color:var(--color-text-secondary)] mb-8">定价：120元/月。入群门票599元（封闭后不再对外），赠送1个月体验。文末扫码加入</p>

                    <div id="article-content" class="max-w-3xl mx-auto">
                        <!-- 1 -->
                        <div class="mb-10">
                            <div class="article-text-block whitespace-pre p-4" contenteditable="false">认真阅读全篇需要10分钟，但是会 <span class="hl">改变你的交易生涯</span> ，你愿意吗？
<span class="hl">说，我愿意！开始！</span>

如果你还在交易的不确定性中苦苦挣扎，甚至依然在亏损？
继续学习和训练是必要的，但是，并不妨碍你通过 <span class="hl">外力的帮助</span> 先获得盈利。

<span class="hl">首先阐明：技术指标是操盘术，是用来托底和拉高上限的，最终的盈利多寡，在于你交易的标的。</span> <span class="article-note-dim">（就比如我穿越回到十年前，告诉你比特币会翻几百万倍，如果没有成熟的交易能力，你依然不会赚到，甚至会在期间反复的拉扯中巨额亏损。反之，对于拥有成熟交易能力的投机者，在得到预判的情况下，却能盈利远超它本身的涨势。）</span>

我们的 <span class="hl">「K次元 - B(买点)S(卖点) 指标系统」</span> 通过精心设计的回测，在「沪深300」近10年的行情上取得 <span class="hl">294%超高年收益率</span> ，同时 <span class="hl">回撤风险极低</span> ，是我自己来说见过唯一达到这个能力的。<span class="article-note-dim">敢这么说，在于本人研究技术分析十多年（以选股为逻辑的量化策略也做过很多），手工一根根K线测试的、写代码跑程序测试的，各种策略，数以万计，现在我基本上光听描述都大概能知道某种技术会有什么表现。</span>

<span class="hl">以下就简单截图展示。</span> <span class="article-note-dim">（待各位入群拿到指标安装到软件后，尽可以自己做更多时间段的、不同指数成份股的、不同板块/概念股的回测，也能自己实盘中对比以证虚实 <span class="article-note-dim2">（如何判断是否隐含未来数据：盘中截图对比，如果有未来数据前一日的指标都会飘忽不定）</span> 。并且通过这些回测，各位还能找到一些选股的秘密！）</span>

<span class="hl">首先是对通达信上测评系统的必要设置，</span> 也就是我上面说过的“精心设计的回测”， <span class="hl">为什么呢？</span> <span class="article-note-dim">如果不按照我的这个严苛的设计，其回测结果与实盘基本不沾边，这也是为什么大多数人明明回测很厉害，一到实盘就翻车的原因。在我的这个设置下，那些均线、MACD等常规技术全军覆没。</span>

<hr class="article-hr">
👇 设置1：做回测的时候一定要选“后复权”，否则股价本身就隐含“未来”</div>
                            <img data-umami-event="bs-a1-view-image-1001" src="./bs_a1/1001.png" alt="图 1" loading="lazy" class="mt-3 w-full rounded border" style="border-color: var(--color-border);" />
                        </div>

                        <!-- 2 -->
                        <div class="mb-10">
                            <div class="article-text-block whitespace-pre p-4">👇 设置2：测评时间段一定要包含完整的一个牛熊周期。<span class="article-note-dim">（但是时间也不能太早远，因为指数本身的成分股变化会太大）</span></div>
                            <img data-umami-event="bs-a1-view-image-1002" src="./bs_a1/1002.png" alt="图 2" loading="lazy" class="mt-3 w-full rounded border" style="border-color: var(--color-border);" />
                        </div>

                        <!-- 3 -->
                        <div class="mb-10">
                            <div class="article-text-block whitespace-pre p-4">👇 设置3：合理的手续费这个默认的就行区别不大。 <span class="hl">而最最重要的是</span> ，介入价位，一定要选「次周期」的。

这个设置也就是说，在指标发生信号后的第二天才进行买入或卖出，为什么呢？因为在实盘中，当天盘中的信号在没有收盘前是会变化的！！！我这里选“次周期中价”，其实选开盘/收盘价都差不多。<span class="article-note-dim">（为什么选次周期？因为实盘中的信号是盘中变化的，如果不选次周期，则可能当天买入后，当天就卖出，这样就无法获得第二天的收益。）</span></span></div>
                            <img data-umami-event="bs-a1-view-image-1003" src="./bs_a1/1003.png" alt="图 3" loading="lazy" class="mt-3 w-full rounded border" style="border-color: var(--color-border);" />
                        </div>

                        <!-- 4 -->
                        <div class="mb-10">
                            <div class="article-text-block whitespace-pre p-4">👇 设置4：平仓条件，略过不选，我们使用指标系统中的卖出信号平仓。</div>
                            <img data-umami-event="bs-a1-view-image-1004" src="./bs_a1/1004.png" alt="图 4" loading="lazy" class="mt-3 w-full rounded border" style="border-color: var(--color-border);" />
                        </div>

                        <!-- 5 -->
                        <div class="mb-10">
                            <div class="article-text-block whitespace-pre p-4">👇 好，下面就是选择的「沪深300」成分股进行测试。</div>
                            <img data-umami-event="bs-a1-view-image-1005" src="./bs_a1/1005.png" alt="图 5" loading="lazy" class="mt-3 w-full rounded border" style="border-color: var(--color-border);" />
                        </div>

                        <!-- 6 -->
                        <div class="mb-10">
                            <div class="article-text-block whitespace-pre p-4">👇 测试结果如图。除了超高的收益率，还请关注两个点：
<ol class="list-decimal ml-6 mt-2">
<li>胜率：36%（有经验的朋友可以看出本策略的核心价值观吧）</li>
<li>最大回撤：39%（即在这整个交易生涯中，资金从最高点回落点程度。并且，通达信的测评结果中这个数字并不是综合平均值，它只是个股中回撤幅度最大的那个，<span class="hl">实际综合平均值是16%</span> ）</li>
</ol></div>
                            <img data-umami-event="bs-a1-view-image-1006" src="./bs_a1/1006.png" alt="图 6" loading="lazy" class="mt-3 w-full rounded border" style="border-color: var(--color-border);" />
                        </div>

                        <!-- 7 -->
                        <div class="mb-10">
                            <div class="article-text-block whitespace-pre p-4">👇 以最高收益排序，对于有大行情的标的，我们的指标的操盘能力，抓取利润的能力，是多么的恐怖和无敌！

就此进一步说明 <span class="hl">指标实际运用方法论：</span>
<ol class="list-decimal ml-6 mt-2">
<li>要知道我们回测可以跑整个指数或板块的成分股，但是实盘中个人的能力只能交易至多几个，所以，8年翻25倍的回测能力，与你的实际盈利并不划等号！你可能是超高几十倍！也可能，只是跑赢大盘。</li>
<!-- <li>经过计算，<span class="hl">更具参考价值的<span class="hl2">长期</span><span class="hl3">复利</span>年化收益率在60%，<span class="hl4">资金每1.5年翻一倍</span></span> ，最大回撤15%。拥有本指标，你将超越99.9%的投资者！<span class="article-note-dim2">这个成绩（排除资金容量的因素，仅对比风险收益比率）甚至接近全球最顶级量化之王--文艺复兴科技（Renaissance Technologies）的「大奖章基金」！</span></li> -->
<li>也就是回到我们开头那句话：技术指标是操盘术，是用来托底和拉高上限的，最终的盈利多寡，在于你交易的标的。</li>
<li>所以，拿到指标后，效果是，你可以终结对技术分析的研究了，<span class="hl">你拥有了对操盘能力的某种确定性！</span></li>
<li>接下来，你可以尽情研究选好股，甚至某些简单粗暴的选股策略都能运用上来取得很好的成绩！</li>
</ol></div>
                            <img data-umami-event="bs-a1-view-image-1007" src="./bs_a1/1007.png" alt="图 7" loading="lazy" class="mt-3 w-full rounded border" style="border-color: var(--color-border);" />
                        </div>

                        <!-- 8 -->
                        <div class="mb-10">
                            <div class="article-text-block whitespace-pre p-4">👇 双击个股可以展开查看它的整个交易记录。</div>
                            <img data-umami-event="bs-a1-view-image-1008" src="./bs_a1/1008.png" alt="图 8" loading="lazy" class="mt-3 w-full rounded border" style="border-color: var(--color-border);" />
                        </div>

                        <!-- 9 -->
                        <div class="mb-10">
                            <div class="article-text-block whitespace-pre p-4">👇 如图，以最低收益率排序，体现的是我们的指标的托底的能力，甚至在最差的行情它也能保本！</div>
                            <img data-umami-event="bs-a1-view-image-1009" src="./bs_a1/1009.png" alt="图 9" loading="lazy" class="mt-3 w-full rounded border" style="border-color: var(--color-border);" />
                        </div>

                        <!-- 10 -->
                        <div class="mb-10">
                            <div class="article-text-block whitespace-pre p-4">👇 双击个股可以展开查看它的整个交易记录。</div>
                            <img data-umami-event="bs-a1-view-image-1010" src="./bs_a1/1010.png" alt="图 10" loading="lazy" class="mt-3 w-full rounded border" style="border-color: var(--color-border);" />
                        </div>

                        <!-- 11 -->
                        <div class="mb-10">
                            <div class="article-text-block whitespace-pre p-4">👇 测评「创业300」</div>
                            <img data-umami-event="bs-a1-view-image-1011" src="./bs_a1/1011.png" alt="图 11" loading="lazy" class="mt-3 w-full rounded border" style="border-color: var(--color-border);" />
                        </div>

                        <!-- 12 -->
                        <div class="mb-10">
                            <div class="article-text-block whitespace-pre p-4">👇 测评「央企100」</div>
                            <img data-umami-event="bs-a1-view-image-1012" src="./bs_a1/1012.png" alt="图 12" loading="lazy" class="mt-3 w-full rounded border" style="border-color: var(--color-border);" />
                        </div>

                        <!-- 13 -->
                        <div class="mb-10">
                            <div class="article-text-block whitespace-pre p-4">👇 测评「5G概念股」</div>
                            <img data-umami-event="bs-a1-view-image-1013" src="./bs_a1/1013.png" alt="图 13" loading="lazy" class="mt-3 w-full rounded border" style="border-color: var(--color-border);" />
                        </div>

                        <!-- 14 -->
                        <div class="mb-10">
                            <div class="article-text-block whitespace-pre p-4">👇 测评「苹果概念股」</div>
                            <img data-umami-event="bs-a1-view-image-1014" src="./bs_a1/1014.png" alt="图 14" loading="lazy" class="mt-3 w-full rounded border" style="border-color: var(--color-border);" />
                        </div>

                        <!-- 15 -->
                        <div class="mb-10">
                            <div class="article-text-block whitespace-pre p-4">👇 测评「通达信热股」。这个要注意了，特意做了一个反例：
<ol class="list-decimal ml-6 mt-2">
<li>警惕！测评系统中提供的指数/板块，其中成分股短期内变化是比较大的。</li>
<li>例如这个「通达信热股」，我们的回测时间段是2017年至2025年，但是现在回测，它提供的是最新更新的涨幅已经很大的股票，那么必然会得到一个非常好的数据！（相当于筛选了已经大涨的股票进行回测）</li>
<li>所以，选择「沪深300」或其他一些长期相对变化不大的指数（并且注意时间跨度的问题）为测试基准是必要的！</li>
</ol></div>
                            <img data-umami-event="bs-a1-view-image-1015" src="./bs_a1/1015.png" alt="图 15" loading="lazy" class="mt-3 w-full rounded border" style="border-color: var(--color-border);" />
                        </div>

                        <!-- 16 -->
                        <div class="mb-10">
                            <div class="article-text-block whitespace-pre p-4">👇 测评「中证龙头」</div>
                            <img data-umami-event="bs-a1-view-image-1016" src="./bs_a1/1016.png" alt="图 16" loading="lazy" class="mt-3 w-full rounded border" style="border-color: var(--color-border);" />
                        </div>

                        <!-- 17 -->
                        <div class="mb-10">
                            <div class="article-text-block whitespace-pre p-4">👇 测评「在线消费概念股」</div>
                            <img data-umami-event="bs-a1-view-image-1017" src="./bs_a1/1017.png" alt="图 17" loading="lazy" class="mt-3 w-full rounded border" style="border-color: var(--color-border);" />
                        </div>

                        <!-- 18 -->
                        <div class="mb-10">
                            <div class="article-text-block whitespace-pre p-4">👇 测评「沪深300」的周线。看看本指标的跨周期能力！并且注意，我们的指标是没有调参数的！主要基于逻辑设计，不需要反复调整参数，避免陷入更多的不确定性中。

但是周线为什么收益率低了这么多呢？留一题，各位思考。</div>
                            <img data-umami-event="bs-a1-view-image-1018" src="./bs_a1/1018.png" alt="图 18" loading="lazy" class="mt-3 w-full rounded border" style="border-color: var(--color-border);" />
                        </div>

                        <!-- 19 -->
                        <div class="mb-10">
                            <div class="article-text-block whitespace-pre p-4">👇 一张图展示，本指标在实盘中，如何运用。
步骤如图中的 1、2（买入）3、4（卖出）。
当你选定标的，贵在坚持！

<span class="article-note-dim">（技巧：买卖日出现时，资金分批操作，把成本控制在当日分时线的均线附近即可，避免追高或抄底。）</span>
</div>
                            <img data-umami-event="bs-a1-view-image-1019" src="./bs_a1/1019.png" alt="图 19" loading="lazy" class="mt-3 w-full rounded border" style="border-color: var(--color-border);" />
                        </div>

                        <!-- 20 -->
                        <div class="mb-10">
                            <div class="article-text-block whitespace-pre p-4">
💰💰💰 本站强力出品，首批用户招募中，后期仅在封闭群中分发！
定价：120元/月。入群门票599元（封闭后不再对外），赠送1个月体验。

扫码加入（ 申请时请备注：kcy_bs_a1 ） 👇
                            </div>
                            <img data-umami-event="bs-a1-view-image-1020" src="./assets/129091644649504.png" alt="图 20" loading="lazy" class="mt-3 w-[200px] mx-auto rounded border" style="border-color: var(--color-border);" />
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <!-- 图片原尺寸预览灯箱 -->
        <div id="lightbox" class="fixed inset-0 bg-black/80 z-50 hidden">
            <button id="lightbox-close" class="absolute top-4 right-4 text-white/80 hover:text-white text-[4rem] leading-none" aria-label="关闭">×</button>
            <div class="w-full h-full overflow-auto">
                <div class="min-w-full min-h-full flex items-center justify-center p-6">
                    <img id="lightbox-img" alt="预览" class="shadow-2xl" style="max-width: none; max-height: none;" />
                </div>
            </div>
        </div>
        <div class="mt-6 mb-6 text-center text-[10px] md:text-xs text-white/20 tracking-wide">
            <div>投资有风险 入市需谨慎</div>
            <div>观点仅供参考 不构成投资建议</div>
        </div>
    </main>

    <script>
        (function () {
            const article = document.getElementById('article-content');
            const overlay = document.getElementById('lightbox');
            const overlayImg = document.getElementById('lightbox-img');
            const btnClose = document.getElementById('lightbox-close');
            if (!article || !overlay || !overlayImg || !btnClose) return;

            function openLightbox(src) {
                overlayImg.onload = function () {
                    overlayImg.style.width = overlayImg.naturalWidth + 'px';
                    overlayImg.style.height = 'auto';
                };
                overlayImg.src = src;
                overlay.classList.remove('hidden');
                document.body.style.overflow = 'hidden';
            }

            function closeLightbox() {
                overlay.classList.add('hidden');
                document.body.style.overflow = '';
                overlayImg.removeAttribute('src');
            }

            article.querySelectorAll('img').forEach(function (img) {
                img.addEventListener('click', function () {
                    openLightbox(img.getAttribute('src'));
                });
            });

            overlay.addEventListener('click', function (e) {
                if (e.target === overlay) closeLightbox();
            });
            btnClose.addEventListener('click', closeLightbox);
            document.addEventListener('keydown', function (e) {
                if (e.key === 'Escape') closeLightbox();
            });
        })();
    </script>

    <script>
        (function () {
            // 阻止右键/选中/复制/拖拽
            ['contextmenu','selectstart','dragstart'].forEach(function(evt){
                document.addEventListener(evt, function(e){ e.preventDefault(); }, { passive:false });
            });
            document.addEventListener('copy', function(e){
                if (e.clipboardData) {
                    e.clipboardData.setData('text/plain', '');
                }
                e.preventDefault();
            }, false);

            // 阻止常见打开开发者工具/查看源码快捷键
            document.addEventListener('keydown', function(e){
                var key = (e.key || '').toLowerCase();
                var meta = e.metaKey || e.ctrlKey; // mac / win
                if (
                    e.keyCode === 123 || // F12
                    (meta && key === 'u') || // 查看源码
                    (meta && key === 's') || // 保存
                    (e.shiftKey && meta && (key === 'i' || key === 'j' || key === 'c')) // DevTools
                ) {
                    e.preventDefault();
                    e.stopPropagation();
                    return false;
                }
            }, true);

            // 创建遮罩，用于发现调试时锁屏
            var blocker = document.createElement('div');
            blocker.id = 'anti-debug-overlay';
            blocker.style.cssText = 'position:fixed;inset:0;background:rgba(0,0,0,0.92);color:#fff;display:none;align-items:center;justify-content:center;z-index:2147483647;';
            var inner = document.createElement('div');
            inner.style.cssText = 'text-align:center;font-size:1.125rem;line-height:1.8;padding:1rem 1.5rem;border:1px solid rgba(255,255,255,0.15);border-radius:12px;background:rgba(17,17,27,0.85);max-width:90%;';
            inner.textContent = '检测到开发者工具已开启，为保护内容已锁定页面。';
            blocker.appendChild(inner);
            document.addEventListener('DOMContentLoaded', function(){ document.body.appendChild(blocker); });

            function showBlock(){ blocker && (blocker.style.display = 'flex'); document.body && (document.body.style.pointerEvents = 'none'); }
            function hideBlock(){ blocker && (blocker.style.display = 'none'); document.body && (document.body.style.pointerEvents = ''); }

            // DevTools 检测：窗口差值 + 轮询
            (function devtoolsWatch(){
                var threshold = 160;
                var opened = false;
                function check(){
                    var wOpen = Math.abs(window.outerWidth - window.innerWidth) > threshold;
                    var hOpen = Math.abs(window.outerHeight - window.innerHeight) > threshold;
                    if (wOpen || hOpen) {
                        if (!opened) { opened = true; showBlock(); }
                    } else {
                        if (opened) { opened = false; hideBlock(); }
                    }
                }
                setInterval(check, 600);
                check();
            })();

            // 提高调试成本：周期性 debugger
            (function noisy(){
                var t = setInterval(function(){
                    try { Function('debugger')(); } catch(_) {}
                }, 2000);
                window.addEventListener('beforeunload', function(){ clearInterval(t); });
            })();
        })();
    </script>
</body>
</html>


